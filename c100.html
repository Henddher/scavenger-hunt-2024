<html>
<body>
  <h1 id="text"></h1>
  <video muted style="display:none"></video>
  <canvas id="canvas"> </canvas>
  <div class="photos" id="photos"></div>
  <script>
    const constraints = {
      audio: false,
      video: { width: 1280, height: 720 },
    };
    const text = document.getElementById("text");
    text.style.fontSize = 100;
    const video = document.querySelector("video");
    const canvas = document.getElementById("canvas");
    const output = document.getElementById("photos");
    output.style.display = "none";
    video.style.display = "none";
    canvas.style.display = "none";
    let pics = 10;

    navigator.mediaDevices
      .getUserMedia(constraints)
      .then((stream) => {
        video.srcObject = stream;
        video.play();
      })
      .catch((err) => {
        console.error(err);
      });

    function takePicture() {
      console.log(pics);
      text.innerText = "ðŸ§€".repeat(pics);
      const context = canvas.getContext("2d");
      canvas.width = constraints.video.width;
      canvas.height = constraints.video.height;
      context.drawImage(
        video, 0, 0, 
        constraints.video.width, 
        constraints.video.height);
      const data = canvas.toDataURL("image/png");
      let photo = document.createElement("img", {});
      photo.setAttribute("src", data);
      output.appendChild(photo);
      console.log(":)", pics);

      if (pics > 0) {
        go(1500);
      } else {
        output.style.display = "block";
        text.innerText = " ðŸŽ„ðŸŽ„ Feliz Navidad ðŸŽ„ðŸŽ„"
      }
      --pics;
    }

    function go(delay) {
      setTimeout(() => {
        takePicture();
      }, delay);
    }
    go(4000);

  </script>
</body>

</html>